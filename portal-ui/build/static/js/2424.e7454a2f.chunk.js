"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[2424],{64163:function(e,n,s){var t=s(1413),a=s(72791),l=s(61889),i=s(11135),r=s(25787),c=s(23814),o=s(80184);n.Z=(0,r.Z)((function(e){return(0,i.Z)((0,t.Z)({},c.xx))}))((function(e){var n=e.classes,s=e.label,t=void 0===s?"":s,i=e.content,r=e.multiLine,c=void 0!==r&&r;return(0,o.jsx)(a.Fragment,{children:(0,o.jsxs)(l.ZP,{className:n.prefinedContainer,children:[""!==t&&(0,o.jsx)(l.ZP,{item:!0,xs:12,className:n.predefinedTitle,children:t}),(0,o.jsx)(l.ZP,{item:!0,xs:12,className:n.predefinedList,children:(0,o.jsx)(l.ZP,{item:!0,xs:12,className:c?n.innerContentMultiline:n.innerContent,children:i})})]})})}))},2424:function(e,n,s){s.r(n);var t=s(29439),a=s(1413),l=s(72791),i=s(60364),r=s(61889),c=s(18073),o=s(43896),u=s(40986),d=s(36151),x=s(11135),m=s(25787),h=s(23814),Z=s(42649),f=s(81207),p=s(83658),j=s(56028),b=s(21435),v=s(37516),C=s(64163),g=s(58400),P=s(19847),y=s(36039),S=s(56087),k=s(38442),N=s(80184),E={setModalErrorSnackMessage:Z.zb},F=(0,i.$j)(null,E);n.default=(0,m.Z)((function(e){return(0,x.Z)((0,a.Z)((0,a.Z)((0,a.Z)({tabsHeader:{marginBottom:"1rem"}},h.ID),h.DF),h.bK))}))(F((function(e){var n=e.classes,s=e.closeModalAndRefresh,a=e.selectedUser,i=e.open,x=e.setModalErrorSnackMessage,m=(0,l.useState)(!1),h=(0,t.Z)(m,2),Z=h[0],E=h[1],F=(0,l.useState)(""),M=(0,t.Z)(F,2),w=M[0],I=M[1],K=(0,l.useState)(""),G=(0,t.Z)(K,2),O=G[0],T=G[1],_=(0,l.useState)(!1),D=(0,t.Z)(_,2),U=D[0],L=D[1],R=(0,l.useState)([]),A=(0,t.Z)(R,2),B=A[0],H=A[1],Y=(0,l.useState)([]),z=(0,t.Z)(Y,2),V=z[0],$=z[1],q=(0,l.useState)([]),J=(0,t.Z)(q,2),Q=J[0],W=J[1],X=(0,l.useState)(0),ee=(0,t.Z)(X,2),ne=ee[0],se=ee[1],te=(0,l.useCallback)((function(){if(!a)return null;f.Z.invoke("GET","/api/v1/user?name=".concat(encodeURI(a.accessKey))).then((function(e){E(!1),I(e.accessKey),H(e.memberOf||[]),W(e.memberOf||[]),L("enabled"===e.status)})).catch((function(e){E(!1),x(e)}))}),[a,x]);(0,l.useEffect)((function(){null===a?(I(""),T(""),H([])):te()}),[a,te]);var ae=""!==w.trim()&&(""!==O.trim()&&null===a||null!==a);return(0,N.jsxs)(j.Z,{onClose:function(){s()},modalOpen:i,title:null!==a?"Edit User":"Create User",titleIcon:(0,N.jsx)(y.P3,{}),children:[null!==a&&(0,N.jsx)("div",{className:n.floatingEnabled,children:(0,N.jsx)(v.Z,{indicatorLabels:["Enabled","Disabled"],checked:U,value:"user_enabled",id:"user-status",name:"user-status",onChange:function(e){L(e.target.checked)},switchOnly:!0})}),(0,N.jsx)(l.Fragment,{children:(0,N.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){if(e.preventDefault(),O.length<8)return x({errorMessage:"Passwords must be at least 8 characters long",detailedError:""}),void E(!1);Z||(E(!0),null!==a?f.Z.invoke("PUT","/api/v1/user?name=".concat(encodeURI(a.accessKey)),{status:U?"enabled":"disabled",groups:B,policies:V}).then((function(e){E(!1),s()})).catch((function(e){E(!1),x(e)})):f.Z.invoke("POST","/api/v1/users",{accessKey:w,secretKey:O,groups:B,policies:V}).then((function(e){E(!1),s()})).catch((function(e){E(!1),x(e)})))}(e)},children:(0,N.jsxs)(r.ZP,{container:!0,children:[(0,N.jsxs)(r.ZP,{item:!0,xs:12,children:[(0,N.jsx)("div",{className:n.formFieldRow,children:(0,N.jsx)(b.Z,{id:"accesskey-input",name:"accesskey-input",label:"Access Key",value:w,autoFocus:!0,onChange:function(e){I(e.target.value)},disabled:null!==a})}),null!==a?(0,N.jsx)(C.Z,{label:"Current Groups",content:Q.join(", ")}):(0,N.jsx)("div",{className:n.formFieldRow,children:(0,N.jsx)(b.Z,{id:"standard-multiline-static",name:"standard-multiline-static",label:"Secret Key",type:"password",value:O,onChange:function(e){T(e.target.value)},autoComplete:"current-password"})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,className:n.tabsHeader,children:(0,N.jsxs)(c.Z,{value:ne,onChange:function(e,n){se(n)},children:[(0,N.jsx)(o.Z,{label:"Groups"}),(0,N.jsx)(k.s,{scopes:[S.Ft.ADMIN_GET_POLICY],resource:S.C3,children:(0,N.jsx)(o.Z,{label:"Policies"})})]})}),(0,N.jsx)(P.x,{value:ne,index:0,children:(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsx)(p.Z,{selectedGroups:B,setSelectedGroups:function(e){H(e)}})})}),(0,N.jsx)(k.s,{scopes:[S.Ft.ADMIN_GET_POLICY],resource:S.C3,children:(0,N.jsx)(P.x,{value:ne,index:1,children:(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsx)(g.Z,{selectedPolicy:V,setSelectedPolicy:$})})})}),Z&&(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsx)(u.Z,{})})]}),(0,N.jsxs)(r.ZP,{item:!0,xs:12,className:n.modalButtonBar,children:[(0,N.jsx)(d.Z,{type:"button",variant:"outlined",color:"primary",onClick:function(){null===a?(I(""),T(""),H([])):H([])},children:"Clear"}),(0,N.jsx)(d.Z,{type:"submit",variant:"contained",color:"primary",disabled:Z||!ae,children:"Save"})]})]})})})]})})))},19847:function(e,n,s){s.d(n,{x:function(){return c}});var t=s(1413),a=s(45987),l=s(72791),i=s(80184),r=["children","value","index"],c=function(e){var n=e.children,s=e.value,c=e.index,o=(0,a.Z)(e,r);return(0,i.jsx)("div",(0,t.Z)((0,t.Z)({role:"tabpanel",hidden:s!==c,id:"simple-tabpanel-".concat(c),"aria-labelledby":"simple-tab-".concat(c),style:{marginTop:"5px"}},o),{},{children:s===c&&(0,i.jsx)(l.Fragment,{children:n})}))}}}]);
//# sourceMappingURL=2424.e7454a2f.chunk.js.map